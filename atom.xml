<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tired to Sleep博客</title>
  
  <subtitle>一世一惆怅，今生莫轻柔</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tiredtosleep.github.io/"/>
  <updated>2018-11-26T13:03:19.871Z</updated>
  <id>https://tiredtosleep.github.io/</id>
  
  <author>
    <name>Tired to Sleep</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>hexo</title>
    <link href="https://tiredtosleep.github.io/hello-world%20-%204.html"/>
    <id>https://tiredtosleep.github.io/hello-world - 4.html</id>
    <published>2018-06-06T16:38:36.000Z</published>
    <updated>2018-11-26T13:03:19.871Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="学习笔记看看" scheme="https://tiredtosleep.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%9C%8B%E7%9C%8B/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="node.js" scheme="https://tiredtosleep.github.io/tags/node-js/"/>
    
      <category term="express" scheme="https://tiredtosleep.github.io/tags/express/"/>
    
      <category term="ssm" scheme="https://tiredtosleep.github.io/tags/ssm/"/>
    
      <category term="vue" scheme="https://tiredtosleep.github.io/tags/vue/"/>
    
      <category term="js" scheme="https://tiredtosleep.github.io/tags/js/"/>
    
      <category term="springboot" scheme="https://tiredtosleep.github.io/tags/springboot/"/>
    
      <category term="springcloud" scheme="https://tiredtosleep.github.io/tags/springcloud/"/>
    
      <category term="看过" scheme="https://tiredtosleep.github.io/tags/%E7%9C%8B%E8%BF%87/"/>
    
      <category term="走过" scheme="https://tiredtosleep.github.io/tags/%E8%B5%B0%E8%BF%87/"/>
    
      <category term="java" scheme="https://tiredtosleep.github.io/tags/java/"/>
    
      <category term="go" scheme="https://tiredtosleep.github.io/tags/go/"/>
    
      <category term="python" scheme="https://tiredtosleep.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>hexo</title>
    <link href="https://tiredtosleep.github.io/hello-world%20-%205%20.html"/>
    <id>https://tiredtosleep.github.io/hello-world - 5 .html</id>
    <published>2018-06-06T16:38:36.000Z</published>
    <updated>2018-11-26T13:03:25.250Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="学习笔记看看" scheme="https://tiredtosleep.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%9C%8B%E7%9C%8B/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="node.js" scheme="https://tiredtosleep.github.io/tags/node-js/"/>
    
      <category term="express" scheme="https://tiredtosleep.github.io/tags/express/"/>
    
      <category term="ssm" scheme="https://tiredtosleep.github.io/tags/ssm/"/>
    
      <category term="vue" scheme="https://tiredtosleep.github.io/tags/vue/"/>
    
      <category term="js" scheme="https://tiredtosleep.github.io/tags/js/"/>
    
      <category term="springboot" scheme="https://tiredtosleep.github.io/tags/springboot/"/>
    
      <category term="springcloud" scheme="https://tiredtosleep.github.io/tags/springcloud/"/>
    
      <category term="看过" scheme="https://tiredtosleep.github.io/tags/%E7%9C%8B%E8%BF%87/"/>
    
      <category term="走过" scheme="https://tiredtosleep.github.io/tags/%E8%B5%B0%E8%BF%87/"/>
    
      <category term="java" scheme="https://tiredtosleep.github.io/tags/java/"/>
    
      <category term="go" scheme="https://tiredtosleep.github.io/tags/go/"/>
    
      <category term="python" scheme="https://tiredtosleep.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>hexo</title>
    <link href="https://tiredtosleep.github.io/hello-world%20-%20%E5%89%AF%E6%9C%AC%20(2).html"/>
    <id>https://tiredtosleep.github.io/hello-world - 副本 (2).html</id>
    <published>2018-06-06T16:38:36.000Z</published>
    <updated>2018-11-26T13:03:30.153Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="学习笔记看看" scheme="https://tiredtosleep.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%9C%8B%E7%9C%8B/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="node.js" scheme="https://tiredtosleep.github.io/tags/node-js/"/>
    
      <category term="express" scheme="https://tiredtosleep.github.io/tags/express/"/>
    
      <category term="ssm" scheme="https://tiredtosleep.github.io/tags/ssm/"/>
    
      <category term="vue" scheme="https://tiredtosleep.github.io/tags/vue/"/>
    
      <category term="js" scheme="https://tiredtosleep.github.io/tags/js/"/>
    
      <category term="springboot" scheme="https://tiredtosleep.github.io/tags/springboot/"/>
    
      <category term="springcloud" scheme="https://tiredtosleep.github.io/tags/springcloud/"/>
    
      <category term="看过" scheme="https://tiredtosleep.github.io/tags/%E7%9C%8B%E8%BF%87/"/>
    
      <category term="走过" scheme="https://tiredtosleep.github.io/tags/%E8%B5%B0%E8%BF%87/"/>
    
      <category term="java" scheme="https://tiredtosleep.github.io/tags/java/"/>
    
      <category term="go" scheme="https://tiredtosleep.github.io/tags/go/"/>
    
      <category term="python" scheme="https://tiredtosleep.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>hexo</title>
    <link href="https://tiredtosleep.github.io/hello-world%20-%20%E5%89%AF%E6%9C%AC%203.html"/>
    <id>https://tiredtosleep.github.io/hello-world - 副本 3.html</id>
    <published>2018-06-06T16:38:36.000Z</published>
    <updated>2018-11-26T13:03:34.321Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="学习笔记看看" scheme="https://tiredtosleep.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%9C%8B%E7%9C%8B/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="node.js" scheme="https://tiredtosleep.github.io/tags/node-js/"/>
    
      <category term="express" scheme="https://tiredtosleep.github.io/tags/express/"/>
    
      <category term="ssm" scheme="https://tiredtosleep.github.io/tags/ssm/"/>
    
      <category term="vue" scheme="https://tiredtosleep.github.io/tags/vue/"/>
    
      <category term="js" scheme="https://tiredtosleep.github.io/tags/js/"/>
    
      <category term="springboot" scheme="https://tiredtosleep.github.io/tags/springboot/"/>
    
      <category term="springcloud" scheme="https://tiredtosleep.github.io/tags/springcloud/"/>
    
      <category term="看过" scheme="https://tiredtosleep.github.io/tags/%E7%9C%8B%E8%BF%87/"/>
    
      <category term="走过" scheme="https://tiredtosleep.github.io/tags/%E8%B5%B0%E8%BF%87/"/>
    
      <category term="java" scheme="https://tiredtosleep.github.io/tags/java/"/>
    
      <category term="go" scheme="https://tiredtosleep.github.io/tags/go/"/>
    
      <category term="python" scheme="https://tiredtosleep.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>标题</title>
    <link href="https://tiredtosleep.github.io/%E6%A0%87%E9%A2%98.html"/>
    <id>https://tiredtosleep.github.io/标题.html</id>
    <published>2018-06-06T16:38:36.000Z</published>
    <updated>2018-11-27T12:57:43.439Z</updated>
    
    <content type="html"><![CDATA[<h1 id="77"><a href="#77" class="headerlink" title="77"></a>77</h1><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><h4 id="大范甘迪"><a href="#大范甘迪" class="headerlink" title="大范甘迪"></a>大范甘迪</h4><h5 id="丰东股份"><a href="#丰东股份" class="headerlink" title="丰东股份"></a>丰东股份</h5>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;77&quot;&gt;&lt;a href=&quot;#77&quot; class=&quot;headerlink&quot; title=&quot;77&quot;&gt;&lt;/a&gt;77&lt;/h1&gt;&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Qui
      
    
    </summary>
    
      <category term="学习笔记看看" scheme="https://tiredtosleep.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E7%9C%8B%E7%9C%8B/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="node.js" scheme="https://tiredtosleep.github.io/tags/node-js/"/>
    
      <category term="express" scheme="https://tiredtosleep.github.io/tags/express/"/>
    
      <category term="ssm" scheme="https://tiredtosleep.github.io/tags/ssm/"/>
    
      <category term="vue" scheme="https://tiredtosleep.github.io/tags/vue/"/>
    
      <category term="js" scheme="https://tiredtosleep.github.io/tags/js/"/>
    
      <category term="springboot" scheme="https://tiredtosleep.github.io/tags/springboot/"/>
    
      <category term="springcloud" scheme="https://tiredtosleep.github.io/tags/springcloud/"/>
    
      <category term="看过" scheme="https://tiredtosleep.github.io/tags/%E7%9C%8B%E8%BF%87/"/>
    
      <category term="走过" scheme="https://tiredtosleep.github.io/tags/%E8%B5%B0%E8%BF%87/"/>
    
      <category term="java" scheme="https://tiredtosleep.github.io/tags/java/"/>
    
      <category term="go" scheme="https://tiredtosleep.github.io/tags/go/"/>
    
      <category term="python" scheme="https://tiredtosleep.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Linux下安装FastDFS</title>
    <link href="https://tiredtosleep.github.io/linux%E4%B8%8B%E5%AE%89%E8%A3%85FastDFS.html"/>
    <id>https://tiredtosleep.github.io/linux下安装FastDFS.html</id>
    <published>2016-07-09T04:28:32.000Z</published>
    <updated>2018-12-02T13:47:14.191Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-FastDFS"><a href="#1-FastDFS" class="headerlink" title="1.FastDFS"></a>1.FastDFS</h1><h2 id="1-1-什么是分布式文件系统"><a href="#1-1-什么是分布式文件系统" class="headerlink" title="1.1.什么是分布式文件系统"></a>1.1.什么是分布式文件系统</h2><p>分布式文件系统（Distributed File System）是指文件系统管理的物理存储资源不一定直接连接在本地节点上，而是通过计算机网络与节点相连。 </p><p>通俗来讲：</p><ul><li>传统文件系统管理的文件就存储在本机。</li><li>分布式文件系统管理的文件存储在很多机器，这些机器通过网络连接，要被统一管理。无论是上传或者访问文件，都需要通过管理中心来访问</li></ul><h2 id="1-2-什么是FastDFS"><a href="#1-2-什么是FastDFS" class="headerlink" title="1.2.什么是FastDFS"></a>1.2.什么是FastDFS</h2><p>FastDFS是由淘宝的余庆先生所开发的一个轻量级、高性能的开源分布式文件系统。用纯C语言开发，功能丰富：</p><ul><li>文件存储</li><li>文件同步</li><li>文件访问（上传、下载）</li><li>存取负载均衡</li><li>在线扩容</li></ul><p>适合有大容量存储需求的应用或系统。同类的分布式文件系统有谷歌的GFS、HDFS（Hadoop）、TFS（淘宝）等。</p><h2 id="1-3-FastDFS的架构"><a href="#1-3-FastDFS的架构" class="headerlink" title="1.3.FastDFS的架构"></a>1.3.FastDFS的架构</h2><h3 id="1-3-1-架构图"><a href="#1-3-1-架构图" class="headerlink" title="1.3.1.架构图"></a>1.3.1.架构图</h3><p>先上图：<br><img src="https://img-blog.csdnimg.cn/20181202203219582.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N4ZzIwMDg4OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>FastDFS两个主要的角色：Tracker Server 和 Storage Server 。</p><ul><li>Tracker Server：跟踪服务器，主要负责调度storage节点与client通信，在访问上起负载均衡的作用，和记录storage节点的运行状态，是连接client和storage节点的枢纽。 </li><li>Storage Server：存储服务器，保存文件和文件的meta data（元数据），每个storage server会启动一个单独的线程主动向Tracker cluster中每个tracker server报告其状态信息，包括磁盘使用情况，文件同步情况及文件上传下载次数统计等信息</li><li>Group：文件组，多台Storage Server的集群。上传一个文件到同组内的一台机器上后，FastDFS会将该文件即时同步到同组内的其它所有机器上，起到备份的作用。不同组的服务器，保存的数据不同，而且相互独立，不进行通信。 </li><li>Tracker Cluster：跟踪服务器的集群，有一组Tracker Server（跟踪服务器）组成。</li><li>Storage Cluster ：存储集群，有多个Group组成。</li></ul><h3 id="1-3-2-上传和下载流程"><a href="#1-3-2-上传和下载流程" class="headerlink" title="1.3.2.上传和下载流程"></a>1.3.2.上传和下载流程</h3><blockquote><p>上传</p></blockquote><p><img src="https://img-blog.csdnimg.cn/20181202203400763.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N4ZzIwMDg4OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><ol><li>Client通过Tracker server查找可用的Storage server。</li><li>Tracker server向Client返回一台可用的Storage server的IP地址和端口号。</li><li>Client直接通过Tracker server返回的IP地址和端口与其中一台Storage server建立连接并进行文件上传。</li><li>上传完成，Storage server返回Client一个文件ID，文件上传结束。</li></ol><blockquote><p>下载</p></blockquote><p><img src="https://img-blog.csdnimg.cn/20181202203526143.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N4ZzIwMDg4OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><ol><li>Client通过Tracker server查找要下载文件所在的的Storage server。</li><li>Tracker server向Client返回包含指定文件的某个Storage server的IP地址和端口号。</li><li>Client直接通过Tracker server返回的IP地址和端口与其中一台Storage server建立连接并指定要下载文件。</li><li>下载文件成功。</li></ol><h1 id="2-Centos下安装FastDFS"><a href="#2-Centos下安装FastDFS" class="headerlink" title="2. Centos下安装FastDFS"></a>2. Centos下安装FastDFS</h1><h2 id="2-1-安装准备"><a href="#2-1-安装准备" class="headerlink" title="2.1 安装准备"></a>2.1 安装准备</h2><p>将下面文件上传到linux下的<code>/home/leyou/fdfs</code>目录:</p><ul><li>FastDFS_v5.08.tar.gz</li><li>fastdfs-nginx-module_v1.16.tar.gz</li><li>libevent-2.0.22-stable.tar.gz</li><li>libfastcommon-master.zip</li></ul><h2 id="2-2-安装依赖"><a href="#2-2-安装依赖" class="headerlink" title="2.2 安装依赖"></a>2.2 安装依赖</h2><p>FastDFS运行需要一些依赖，在课前资料提供的虚拟中已经安装好了这些依赖，如果大家想要从头学习，可以按下面方式安装：</p><h3 id="2-2-1-安装GCC依赖"><a href="#2-2-1-安装GCC依赖" class="headerlink" title="2.2.1 安装GCC依赖"></a>2.2.1 安装GCC依赖</h3><p>GCC用来对C语言代码进行编译运行，使用yum命令安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc</span><br></pre></td></tr></table></figure><h3 id="2-2-2-安装unzip工具"><a href="#2-2-2-安装unzip工具" class="headerlink" title="2.2.2 安装unzip工具"></a>2.2.2 安装unzip工具</h3><p>unzip工具可以帮我们对压缩包进行解压</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y unzip zip</span><br></pre></td></tr></table></figure><h3 id="2-2-3-安装libevent"><a href="#2-2-3-安装libevent" class="headerlink" title="2.2.3 安装libevent"></a>2.2.3 安装libevent</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libevent</span><br></pre></td></tr></table></figure><h3 id="2-2-4-安装Nginx所需依赖"><a href="#2-2-4-安装Nginx所需依赖" class="headerlink" title="2.2.4 安装Nginx所需依赖"></a>2.2.4 安装Nginx所需依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install pcre pcre-devel zlib zlib-devel openssl openssl-devel</span><br></pre></td></tr></table></figure><h3 id="2-2-5-安装libfastcommon-master"><a href="#2-2-5-安装libfastcommon-master" class="headerlink" title="2.2.5 安装libfastcommon-master"></a>2.2.5 安装libfastcommon-master</h3><p>这个没有yum包，只能通过编译安装：</p><ul><li><p>解压刚刚上传的<code>libfastcommon-master.zip</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# unzip libfastcommon-master.zip</span><br></pre></td></tr></table></figure></li><li><p>进入解压完成的目录：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]#  cd libfastcommon-master</span><br></pre></td></tr></table></figure></li><li><p>编译并且安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote libfastcommon-master]#  ./make.sh  &amp;&amp; ./make.sh install</span><br></pre></td></tr></table></figure></li></ul><p>到这里为止，所有依赖都已经安装完毕，接下来我们安装FastDFS：</p><h2 id="2-3-安装FastDFS"><a href="#2-3-安装FastDFS" class="headerlink" title="2.3 安装FastDFS"></a>2.3 安装FastDFS</h2><h3 id="2-3-1-编译安装"><a href="#2-3-1-编译安装" class="headerlink" title="2.3.1 编译安装"></a>2.3.1 编译安装</h3><p>这里我们也采用编译安装，步骤与刚才的编译安装方式一样：</p><ul><li><p>解压</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# tar -xvf FastDFS_v5.08.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>进入目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# cd FastDFS</span><br></pre></td></tr></table></figure></li><li><p>编译并安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote FastDFS]#  ./make.sh &amp;&amp; ./make.sh install</span><br></pre></td></tr></table></figure></li><li><p>校验安装结果</p></li></ul><p>1）安装完成，我们应该能在<code>/etc/init.d/</code>目录，通过命令<code>ll /etc/init.d/ | grep fdfs</code>看到FastDFS提供的启动脚本：</p><p><img src="https://img-blog.csdnimg.cn/20181202204229813.png" alt="在这里插入图片描述"></p><p>其中：</p><ul><li><code>fdfs_trackerd</code> 是tracker启动脚本</li><li><code>fdfs_storaged</code> 是storage启动脚本</li></ul><p>2）我们可以在 <code>/etc/fdfs</code>目录，通过命令查看到以下配置文件模板：</p><p><img src="https://img-blog.csdnimg.cn/20181202204248246.png" alt="在这里插入图片描述"></p><p>其中：</p><ul><li><code>tarcker.conf.sample</code> 是tracker的配置文件模板</li><li><code>storage.conf.sample</code> 是storage的配置文件模板</li><li><code>client.conf.sample</code> 是客户端的配置文件模板</li></ul><h3 id="2-3-2-etc-fdfs中修改tracker"><a href="#2-3-2-etc-fdfs中修改tracker" class="headerlink" title="2.3.2 /etc/fdfs中修改tracker"></a>2.3.2 /etc/fdfs中修改tracker</h3><p>FastDFS的tracker和storage在刚刚的安装过程中，都已经被安装了，因此我们安装这两种角色的方式是一样的。不同的是，两种需要不同的配置文件。</p><p>我们要启动tracker，就修改刚刚看到的<code>tarcker.conf</code>，并且启动<code>fdfs_trackerd</code>脚本即可。</p><ul><li>编辑tracker配置</li></ul><p>首先我们将模板文件进行赋值和重命名：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@promote ~]# cd /etc/fdfs/</span><br><span class="line">[root@promote fdfs]# cp tracker.conf.sample tracker.conf</span><br><span class="line"> [root@promote fdfs]# vim tracker.conf</span><br></pre></td></tr></table></figure><p>打开<code>tracker.conf</code>，修改<code>base_path</code>配置：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base_path=/leyou/fdfs/tracker # tracker的数据和日志存放目录</span><br></pre></td></tr></table></figure><ul><li>创建目录</li></ul><p>刚刚配置的目录可能不存在，我们在根目录上创建<code>leyou</code> 出来</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# mkdir -p /leyou/fdfs/tracker</span><br></pre></td></tr></table></figure><ul><li><p>启动tracker</p><p>我们可以使用 <code>sh /etc/init.d/fdfs_trackerd</code> 启动，不过安装过程中，fdfs已经被设置为系统服务，我们可以采用熟悉的服务启动方式：</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]#  service fdfs_trackerd start # 启动fdfs_trackerd服务，停止用stop</span><br></pre></td></tr></table></figure><ul><li><p>查看是否运行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# ps -ef | grep fdfs</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://img-blog.csdnimg.cn/20181202204609937.png" alt="在这里插入图片描述"></p><p>另外，我们可以通过以下命令，设置tracker开机启动：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig fdfs_trackerd on</span><br></pre></td></tr></table></figure><h3 id="2-3-3-etc-fdfs中启动storage"><a href="#2-3-3-etc-fdfs中启动storage" class="headerlink" title="2.3.3 /etc/fdfs中启动storage"></a>2.3.3 /etc/fdfs中启动storage</h3><p>我们要启动tracker，就修改刚刚看到的<code>tarcker.conf</code>，并且启动<code>fdfs_trackerd</code>脚本即可。</p><ul><li>编辑storage配置</li></ul><p>首先我们将模板文件进行赋值和重命名：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 在etc/fdfs目录下</span><br><span class="line">[root@promote fdfs]#  cp storage.conf.sample storage.conf</span><br><span class="line">[root@promote fdfs]#  vim storage.conf</span><br></pre></td></tr></table></figure><p>打开<code>storage.conf</code>，修改<code>base_path</code>配置：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">base_path=/leyou/fdfs/storage # storage的数据和日志存放目录</span><br><span class="line">store_path0=/leyou/fdfs/storage # storage的上传文件存放路径</span><br><span class="line">tracker_server=192.168.56.101:22122 # tracker的地址（服务器IP地址192.168.25.128）</span><br></pre></td></tr></table></figure><ul><li>创建目录</li></ul><p>刚刚配置的目录可能不存在，我们创建出来</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# mkdir -p /leyou/fdfs/storage</span><br></pre></td></tr></table></figure><ul><li><p>启动storage</p><p>我们可以使用 <code>sh /etc/init.d/fdfs_storaged</code> 启动，同样我们可以用服务启动方式：</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]#  service fdfs_storaged start  # 启动fdfs_storaged服务，停止用stop</span><br></pre></td></tr></table></figure><p>另外，我们可以通过以下命令，设置tracker开机启动：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# chkconfig fdfs_storaged on</span><br></pre></td></tr></table></figure><p>最后，通过<code>ps -ef | grep fdfs</code> 查看进程：</p><p><img src="https://img-blog.csdnimg.cn/2018120220432419.png" alt="在这里插入图片描述"></p><h2 id="2-3-4-测试上传"><a href="#2-3-4-测试上传" class="headerlink" title="2.3.4.测试上传"></a>2.3.4.测试上传</h2><p>进入/etc/fdfs目录，修改client.config</p><p>修改配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tracker_service=192.168.25.128:22122</span><br><span class="line">base_path=/image  #要上传的文件目录</span><br></pre></td></tr></table></figure><p>运行：</p><p>/usr/bin/fdfs_upload_file：脚本</p><p>/etc/fdfs/client.conf ：配置文件</p><p>/image：要上传文件的              目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# /usr/bin/fdfs_upload_file   /etc/fdfs/client.conf   /image/1.jpg</span><br></pre></td></tr></table></figure><p>成功后返回图片的id：</p><p>group1/M00/00/00/wKgZgFwDWcGASgnlAAE74lc0orE837.jpg</p><ul><li><p>group1：组信息</p></li><li><p>M00：对应store_path0</p></li><li><p>/00/00：磁盘路径</p></li></ul><h2 id="2-4-安装Nginx及FastDFS模块"><a href="#2-4-安装Nginx及FastDFS模块" class="headerlink" title="2.4 安装Nginx及FastDFS模块"></a>2.4 安装Nginx及FastDFS模块</h2><h3 id="2-4-1-FastDFS的Nginx模块"><a href="#2-4-1-FastDFS的Nginx模块" class="headerlink" title="2.4.1 FastDFS的Nginx模块"></a>2.4.1 FastDFS的Nginx模块</h3><ul><li><p>解压/home/leyou/fdfs下的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote fdfs]# tar -xvf fastdfs-nginx-module_v1.16.tar.gz</span><br></pre></td></tr></table></figure><p>​</p></li></ul><ul><li><p>配置config文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 进入配置目录</span><br><span class="line">[root@promote fdfs]# cd /home/leyou/fdfs/fastdfs-nginx-module/src/</span><br><span class="line"><span class="meta">#</span> 修改配置</span><br><span class="line">[root@promote src]# vim config</span><br><span class="line"><span class="meta">#</span> 执行下面命令（将配置中的/usr/local改为/usr）：</span><br><span class="line">:%s+/usr/local/+/usr/+g</span><br></pre></td></tr></table></figure></li><li><p>配置mod_fastdfs.conf</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 将src目录下的mod_fastdfs.conf复制到 /etc/fdfs目录：</span><br><span class="line">[root@promote src]# cp mod_fastdfs.conf /etc/fdfs/</span><br><span class="line"><span class="meta">#</span> 编辑该文件</span><br><span class="line">[root@promote src]# vim /etc/fdfs/mod_fastdfs.cof</span><br></pre></td></tr></table></figure></li><li><p>修改一下配置：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">connect_timeout=10                  # 客户端访问文件连接超时时长（单位：秒）</span><br><span class="line">tracker_server=192.168.25.128:22122  # tracker服务IP和端口</span><br><span class="line">url_have_group_name=true            # 访问链接前缀加上组名</span><br><span class="line">store_path0=/leyou/fdfs/storage        # 文件存储路径</span><br></pre></td></tr></table></figure></li><li><p>复制 FastDFS的部分配置文件到/etc/fdfs目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@promote src]# cd /home/leyou/fdfs/FastDFS/conf/</span><br><span class="line">[root@promote conf]# http.conf mime.types /etc/fdfs/</span><br></pre></td></tr></table></figure><p>​</p></li></ul><h3 id="2-4-2-配置Nginx"><a href="#2-4-2-配置Nginx" class="headerlink" title="2.4.2 配置Nginx"></a>2.4.2 配置Nginx</h3><p>已经安装了nginx中配置</p><ul><li><p>配置</p><p>在/home/leyou/nginx目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote nginx]# ./configure --prefix=/opt/nginx --sbin-path=/usr/bin/nginx --add-module=/home/leyou/fdfs/fastdfs-nginx-module/src</span><br></pre></td></tr></table></figure></li><li><p>编译安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote nginx]# make</span><br></pre></td></tr></table></figure><p>备份之前的/usr/bin/nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote nginx]# mv /usr/bin/nginx   /usr/bin/nginx-bck</span><br></pre></td></tr></table></figure><p>用刚刚编译的nginx替换之前安装的nginx</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote nginx]# cp /home/leyou/nginx/objs/nginx  /usr/bin/</span><br></pre></td></tr></table></figure></li><li><p>配置nginx整合fastdfs-module模块</p><p>我们需要修改nginx配置文件，在/opt/nginx/config/nginx.conf文件中：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote nginx]# vim  /opt/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure><p>将文件中，添加如下代码：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  image.taotao.com;</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 监听域名中带有group的，交给FastDFS模块处理</span></span><br><span class="line">    <span class="attribute">location</span> ~/group([<span class="number">0</span>-<span class="number">9</span>])/ &#123;</span><br><span class="line">        ngx_fastdfs_module;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   html;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@promote objs]# nginx # 启动</span><br><span class="line">ngx_http_fastdfs_set pid=8152 # 启动成功</span><br><span class="line">[root@promote objs]# nginx -s stop # 停止</span><br><span class="line">[root@promote objs]# nginx -s reload # 重新加载配置</span><br></pre></td></tr></table></figure><p>测试</p><p><a href="http://image.leyou.com/group1/M00/00/00/wKgZgFwDWcGASgnlAAE74lc0orE837.jpg" target="_blank" rel="noopener">http://image.leyou.com/group1/M00/00/00/wKgZgFwDWcGASgnlAAE74lc0orE837.jpg</a></p><p><img src="https://img-blog.csdnimg.cn/20181202204444518.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2N4ZzIwMDg4OA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p></li><li><p>设置nginx开机启动</p><p>创建一个开机启动的脚本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@promote nginx]# vim /etc/init.d/nginx</span><br></pre></td></tr></table></figure><p>添加以下内容：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/sh</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># nginx - this script starts and stops the nginx daemon</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># chkconfig:   - 85 15</span></span><br><span class="line"><span class="comment"># description:  NGINX is an HTTP(S) server, HTTP(S) reverse \</span></span><br><span class="line"><span class="comment">#               proxy and IMAP/POP3 proxy server</span></span><br><span class="line"><span class="comment"># processname: nginx</span></span><br><span class="line"><span class="comment"># config:      /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="comment"># config:      /etc/sysconfig/nginx</span></span><br><span class="line"><span class="comment"># pidfile:     /var/run/nginx.pid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Source function library.</span></span><br><span class="line">. /etc/rc.d/init.d/functions</span><br><span class="line"></span><br><span class="line"><span class="comment"># Source networking configuration.</span></span><br><span class="line">. /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check that networking is up.</span></span><br><span class="line">[ "$NETWORKING" = "no" ] &amp;&amp; exit 0</span><br><span class="line"><span class="comment">#nginx脚本地址</span></span><br><span class="line">nginx="/usr/bin/nginx"</span><br><span class="line">prog=$(basename $nginx)</span><br><span class="line"><span class="comment">#nginx配置目录</span></span><br><span class="line">NGINX_CONF_FILE="/opt/nginx/conf/nginx.conf"</span><br><span class="line"></span><br><span class="line">[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx</span><br><span class="line"></span><br><span class="line">lockfile=/var/lock/subsys/nginx</span><br><span class="line"></span><br><span class="line">make_dirs() &#123;</span><br><span class="line">   <span class="comment"># make required directories</span></span><br><span class="line">   user=`$nginx -V 2&gt;&amp;1 | grep "configure arguments:.*--user=" | sed 's/[^*]*--user=\([^ ]*\).*/\1/g' -`</span><br><span class="line">   if [ -n "$user" ]; then</span><br><span class="line">      if [ -z "`grep $user /etc/passwd`" ]; then</span><br><span class="line">         <span class="attribute">useradd</span> -M -s /bin/nologin <span class="variable">$user</span></span><br><span class="line">      fi</span><br><span class="line">      options=`<span class="variable">$nginx</span> -V <span class="number">2</span>&gt;&amp;<span class="number">1</span> | grep <span class="string">'configure arguments:'</span>`</span><br><span class="line">      for opt in $options; do</span><br><span class="line">          if [ `echo $opt | grep '.*-temp-path'` ]; then</span><br><span class="line">              value=`echo $opt | cut -d "=" -f 2`</span><br><span class="line">              if [ ! -d "$value" ]; then</span><br><span class="line">                  <span class="comment"># echo "creating" $value</span></span><br><span class="line">                  <span class="attribute">mkdir</span> -p <span class="variable">$value</span> &amp;&amp; chown -R <span class="variable">$user</span> <span class="variable">$value</span></span><br><span class="line">              fi</span><br><span class="line">          fi</span><br><span class="line">       done</span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">start() &#123;</span><br><span class="line">    [ -x $nginx ] || exit 5</span><br><span class="line">    [ -f $NGINX_CONF_FILE ] || exit 6</span><br><span class="line">    make_dirs</span><br><span class="line">    <span class="attribute">echo</span> -n $<span class="string">"Starting <span class="variable">$prog</span>: "</span></span><br><span class="line">    daemon <span class="variable">$nginx</span> -c <span class="variable">$NGINX_CONF_FILE</span></span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ <span class="variable">$retval</span> -eq <span class="number">0</span> ] &amp;&amp; touch <span class="variable">$lockfile</span></span><br><span class="line">    return <span class="variable">$retval</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">stop() &#123;</span><br><span class="line">    <span class="attribute">echo</span> -n $<span class="string">"Stopping <span class="variable">$prog</span>: "</span></span><br><span class="line">    killproc <span class="variable">$prog</span> -QUIT</span><br><span class="line">    retval=$?</span><br><span class="line">    echo</span><br><span class="line">    [ <span class="variable">$retval</span> -eq <span class="number">0</span> ] &amp;&amp; rm -f <span class="variable">$lockfile</span></span><br><span class="line">    return <span class="variable">$retval</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">restart() &#123;</span><br><span class="line">    <span class="attribute">configtest</span> || return $?</span><br><span class="line">    stop</span><br><span class="line">    sleep <span class="number">1</span></span><br><span class="line">    start</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">reload() &#123;</span><br><span class="line">    <span class="attribute">configtest</span> || return $?</span><br><span class="line">    echo -n $<span class="string">"Reloading <span class="variable">$prog</span>: "</span></span><br><span class="line">    killproc <span class="variable">$nginx</span> -HUP</span><br><span class="line">    RETVAL=$?</span><br><span class="line">    echo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">force_reload() &#123;</span><br><span class="line">    restart</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">configtest() &#123;</span><br><span class="line">  $nginx -t -c $NGINX_CONF_FILE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_status() &#123;</span><br><span class="line">    <span class="attribute">status</span> <span class="variable">$prog</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rh_status_q() &#123;</span><br><span class="line">    <span class="attribute">rh_status</span> &gt;/dev/null <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">case <span class="string">"<span class="variable">$1</span>"</span> in</span><br><span class="line">    start)</span><br><span class="line">        rh_status_q &amp;&amp; exit <span class="number">0</span></span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        <span class="attribute">rh_status_q</span> || exit <span class="number">0</span></span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    restart|configtest)</span><br><span class="line">        $1</span><br><span class="line">        ;;</span><br><span class="line">    reload)</span><br><span class="line">        <span class="attribute">rh_status_q</span> || exit <span class="number">7</span></span><br><span class="line">        <span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    force-reload)</span><br><span class="line">        force_reload</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        rh_status</span><br><span class="line">        ;;</span><br><span class="line">    condrestart|try-restart)</span><br><span class="line">        <span class="attribute">rh_status_q</span> || exit <span class="number">0</span></span><br><span class="line">            ;;</span><br><span class="line">    *)</span><br><span class="line">        <span class="attribute">echo</span> $<span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest&#125;"</span></span><br><span class="line">        exit <span class="number">2</span></span><br><span class="line">esac</span><br></pre></td></tr></table></figure></li><li><p>修改文件权限，并加入服务列表</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 修改权限（最高）</span><br><span class="line">chmod 777 /etc/init.d/nginx </span><br><span class="line"><span class="meta">#</span> 添加到服务列表</span><br><span class="line">chkconfig --add /etc/init.d/nginx</span><br></pre></td></tr></table></figure></li><li><p>设置开机启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig nginx on</span><br></pre></td></tr></table></figure><p>​</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;1-FastDFS&quot;&gt;&lt;a href=&quot;#1-FastDFS&quot; class=&quot;headerlink&quot; title=&quot;1.FastDFS&quot;&gt;&lt;/a&gt;1.FastDFS&lt;/h1&gt;&lt;h2 id=&quot;1-1-什么是分布式文件系统&quot;&gt;&lt;a href=&quot;#1-1-什么是分布式文
      
    
    </summary>
    
      <category term="分布式文件系统" scheme="https://tiredtosleep.github.io/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="FastDFS" scheme="https://tiredtosleep.github.io/tags/FastDFS/"/>
    
      <category term="分布式文件系统" scheme="https://tiredtosleep.github.io/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="linux" scheme="https://tiredtosleep.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Nginx安装</title>
    <link href="https://tiredtosleep.github.io/Nginx%E7%9A%84%E5%AE%89%E8%A3%85.html"/>
    <id>https://tiredtosleep.github.io/Nginx的安装.html</id>
    <published>2016-06-06T16:38:36.000Z</published>
    <updated>2018-11-27T12:24:02.955Z</updated>
    
    <content type="html"><![CDATA[<h2 id="nginx的介绍"><a href="#nginx的介绍" class="headerlink" title="nginx的介绍"></a>nginx的介绍</h2><p>Nginx是一款高性能的http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器。由俄罗斯的程序设计师Igor Sysoev所开发，官方测试nginx能够支支撑5万并发链接，并且cpu、内存等资源消耗却非常低，运行非常稳定。</p><h2 id="安装准备"><a href="#安装准备" class="headerlink" title="安装准备"></a>安装准备</h2><ul><li><p>虚拟机VM</p></li><li><p>Linux CentOs6.8系统</p></li><li><p>电脑</p></li></ul><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><h3 id="需要安装gcc的环境"><a href="#需要安装gcc的环境" class="headerlink" title="需要安装gcc的环境"></a>需要安装gcc的环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install gcc-c++</span><br></pre></td></tr></table></figure><h3 id="第三方的开发包"><a href="#第三方的开发包" class="headerlink" title="第三方的开发包"></a>第三方的开发包</h3><ul><li>PCRE:<br>​PCRE，(Perl Compatible Regular Expressions)是一个Perl库，包括 perl兼容的正则表达式库。nginx的http模块使用pcre来解析正则表达式</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure><ul><li>zlib:<br>zlib库提供了很多种压缩和解压缩的方式，nginx使用zlib对http包的内容进行gzip，所以需要在linux上安装zlib库。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure><ul><li>openssl:<br>OpenSSL 是一个强大的安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富<br>的应用程序供测试或其它目的使用。nginx不仅支持http协议，还支持https（即在ssl协议上传输http），所以需要在linux安装openssl库。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure><h2 id="下载nginx"><a href="#下载nginx" class="headerlink" title="下载nginx"></a>下载nginx</h2><p><a href="http://nginx.org/download/为nginx下载地址" target="_blank" rel="noopener">http://nginx.org/download/为nginx下载地址</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# wget http://nginx.org/download/nginx-1.10.0.tar.gz</span><br></pre></td></tr></table></figure><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><ul><li>创建一个work文件:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost home]#  mkdir work</span><br></pre></td></tr></table></figure><ul><li>将nginx-1.10.0.tar.gz 复制到/home/work目录下</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cp nginx-1.10.0.tar.gz  /home/work</span><br></pre></td></tr></table></figure><ul><li>解压nginx：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost work]# tar -xvf  nginx-1.10.0.tar.gz</span><br></pre></td></tr></table></figure><ul><li>改名字：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost work]# mv nginx-1.10.0 nginx</span><br></pre></td></tr></table></figure><ul><li>配置nginx:<br>安装目录是/opt/nginx</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//进入解压好的nginx</span><br><span class="line">[root@localhost work]#cd nginx</span><br><span class="line">//安装</span><br><span class="line">[root@localhost nginx]#  ./configure --prefix=/opt/nginx  --sbin-path=/usr/bin/nginx</span><br></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/6008486-ad45c816283b1c2d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="安装后出现的"></p><ul><li>编译安装:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginx]# make &amp;&amp; make install</span><br></pre></td></tr></table></figure><ul><li>启动：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginx]# nginx</span><br></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>输入linux的ip地址<br><img src="https://upload-images.jianshu.io/upload_images/6008486-500e18147fa50446.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="测试成功如下"></p><h3 id="停止和重新加载"><a href="#停止和重新加载" class="headerlink" title="停止和重新加载"></a>停止和重新加载</h3><p>在存放nginx的目录下/home/leyou/nginx操作</p><p>停止：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginx]#  nginx -s stop</span><br></pre></td></tr></table></figure></p><p>重新加载：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginx]#  nginx -s reload</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;nginx的介绍&quot;&gt;&lt;a href=&quot;#nginx的介绍&quot; class=&quot;headerlink&quot; title=&quot;nginx的介绍&quot;&gt;&lt;/a&gt;nginx的介绍&lt;/h2&gt;&lt;p&gt;Nginx是一款高性能的http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理
      
    
    </summary>
    
      <category term="Nginx" scheme="https://tiredtosleep.github.io/categories/Nginx/"/>
    
    
      <category term="nginx" scheme="https://tiredtosleep.github.io/tags/nginx/"/>
    
      <category term="nginx安装" scheme="https://tiredtosleep.github.io/tags/nginx%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
</feed>
